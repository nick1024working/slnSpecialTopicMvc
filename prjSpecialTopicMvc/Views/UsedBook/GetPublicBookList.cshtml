@using prjSpecialTopicMvc.Features.Usedbook.Application.DTOs.Responses
@model IEnumerable<PublicBookListItemDto>

@{
    ViewData["Title"] = "所有二手書列表";
}

@section Styles{
    <style>
        /* 圖片等高裁切，避免版面忽大忽小 */
        .book-card-img {
            height: 240px; /* 可調 200~280px */
            width: 100%;
            object-fit: cover;
        }

        /* 標題最多兩行，超出以省略號 */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* 卡片 hover 更有互動感（可選） */
        .card:hover {
            transform: translateY(-2px);
            transition: transform .2s ease, box-shadow .2s ease;
            box-shadow: 0 6px 24px rgba(0,0,0,.08);
        }
    </style>
}

<div class="row my-2">
    <h2>全站分類</h2>
</div>

<div class="row">
    <!-- Sidebar 區塊 -->
    <aside class="col-md-2 mb-4">
        <div class="card shadow-sm">
            <div class="card-header fw-bold">
                篩選條件
            </div>
            <div class="card-body">
                <form>
                    <div class="mb-3">
                        <label class="form-label">分類</label>
                        <select class="form-select">
                            <option selected>全部</option>
                            <option value="1">文學</option>
                            <option value="2">商業</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">最低價格</label>
                        <input type="number" class="form-control" placeholder="例如：100" />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">最高價格</label>
                        <input type="number" class="form-control" placeholder="例如：500" />
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">套用篩選</button>
                    </div>
                </form>
            </div>
        </div>
    </aside>

    <!-- 主內容區塊：書籍卡片清單 -->
    <div class="col-md-10">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-6 g-6">
            @foreach (var item in Model)
            {
                <div class="col">
                    <a href="/usedbooks/@item.Slug" class="text-decoration-none text-dark">
                        <div class="card h-100 shadow-sm position-relative">
                            <img src="@item.CoverImageUrl" alt="@item.Title" loading="lazy" class="card-img-top book-card-img" />
                            <div class="card-body d-flex flex-column">
                                <h6 class="card-title mb-1 line-clamp-2">@item.Title</h6>
                                <div class="text-muted small mb-2">@item.Authors</div>
                                <div class="mt-auto">
                                    <div class="fw-semibold fs-5">NT$@item.SalePrice.ToString("N0")</div>
                                    <span class="badge bg-info-subtle text-info-emphasis">品況 @item.ConditionRating</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</div>

